{
    "errors": {
        "1": {
            "text": "Invalid client uuid",
            "description": "This error indicates that the [client uuid](#type-uuid) sent by the client is invalid. This means that it did not pass the regex."
        },
        "2": {
            "text": "Invalid service",
            "description": "This error indicates that the [service token](#type-service) sent by the client is invalid. This means that it did not pass the regex."
        },
        "3": {
            "text": "Invalid secret",
            "description": "This error indicates that the [secret token](#type-secret) sent by the client is invalid. This means that it did not pass the regex."
        },
        "4": {
            "text": "Already listening to that service",
            "description": "The client is already listening to the service it is trying to subscribe to. This error can generally be ignored."
        },
        "5": {
            "text": "Whoaw there cowboy, slow down!",
            "description": "The rate limiter has detected that you're requesting certain API methods too often."
        },
        "6": {
            "text": "Service not found",
            "description": "The secret token or service token given could not be found in the database."
        },
        "7": {
            "text": "Missing argument {argument}",
            "description": "The argument {argument} was expected but not sent by the client."
        }
    },

    "types": {
        "uuid": {
            "name": "uuid",
            "description": "The uuid is used to identify the client. It has to remain consistent and can be generated by pure randomness, obtained through device APIs or obtained by [generating it some other way](https://en.wikipedia.org/wiki/Universally_unique_identifier#Variants_and_versions).",
            "example": "D867AB3E-36D2-11E4-AEA8-76C9E2E253B6",
            "regex": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
        },
        "service": {
            "name": "Service token",
            "description": "This is a public token that is used to identify services. This token grants the client the ability to listen to services.",
            "example": "4be3-eda97a-0d7faeab05a0-89403-ad4751c49",
            "regex": "^[a-zA-Z0-9]{4}-[a-zA-Z0-9]{6}-[a-zA-Z0-9]{12}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{9}$"
        },
        "secret": {
            "name": "Secret token",
            "description": "This is a *secret* token that is used to identify services. It can be used to send messages to clients listening to the service.",
            "example": "d2d1820d56b862a6f5b1a69a7af730fa",
            "regex": "^[a-zA-Z0-9]{32}$"
        },
        "timestamp": {
            "name": "UNIX timestamp",
            "description": "A UTC UNIX timestamp",
            "example": 1410124028,
            "regex": "^\\d%2B$"
        }
    },

    "objects": {
        "service": {
            "name": "Service",
            "description": "This object is returned when obtaining service info.",
            "variables": {
                "public": {
                    "description": "The public token used by the service.",
                    "type": "service",
                    "example": "4be3-eda97a-0d7faeab05a0-89403-ad4751c49",
                    "optional": false
                },
                "secret": {
                    "description": "The secret token used by the service to send messages.",
                    "type": "secret",
                    "example": "d2d1820d56b862a6f5b1a69a7af730fa",
                    "optional": true
                },
                "name": {
                    "description": "The service name.",
                    "type": "string",
                    "example": "Important stuff",
                    "optional": false
                },
                "created": {
                    "description": "A timestamp that matches the time/date the service was created.",
                    "type": "timestamp",
                    "example": 1410106353,
                    "optional": false
                },
                "icon": {
                    "description": "A optional service icon image url.",
                    "type": "url",
                    "example": "https://upload.wikimedia.org/wikipedia/commons/8/88/Red_triangle_alert_icon.png",
                    "optional": true
                }
            }
        },
        "listen": {
            "name": "Listen",
            "description": "This object is returned when requesting information about subscription.",
            "variables": {
                "service": {
                    "description": "The client identifier of the client that is listening to the service",
                    "object": "uuid",
                    "optional": false
                },
                "service": {
                    "description": "A optional service icon image url.",
                    "object": "service",
                    "optional": false
                },
                "timestamp": {
                    "description": "A timestamp that matches the time/date the client started listening to the service.",
                    "type": "timestamp",
                    "example": 1410106353,
                    "optional": false
                },
                "timestamp_checked": {
                    "description": "A timestamp that matches the time/date the subscription was last checked.",
                    "type": "timestamp",
                    "example": 1410185153,
                    "optional": false
                }
            }
        },
        "message": {
            "name": "Message",
            "description": "A notification message sent by a service.",
            "variables": {
                "service": {
                    "description": "A optional service icon image url.",
                    "object": "service",
                    "optional": false
                },
                "title": {
                    "description": "The optional title of the message.",
                    "type": "string",
                    "example": "Cool movie",
                    "optional": true
                },
                "message": {
                    "description": "The content of the message.",
                    "type": "string",
                    "example": "Download just completed",
                    "optional": false
                },
                "link": {
                    "description": "An optional url that can be sent with the message that allows a client application to redirect a user to that url if needed.",
                    "type": "url",
                    "example": "http://example.com/",
                    "optional": true
                },
                "level": {
                    "description": "This variable is used to indicate the importance of a notification: 1 very low, 2 low, 3 normal, 4 high, 5 very high.",
                    "type": "int",
                    "example": 3,
                    "optional": false
                },
                "timestamp": {
                    "description": "A timestamp that matches the time/date the client started listening to the service.",
                    "type": "timestamp",
                    "example": 1410106353,
                    "optional": false
                }
            }
        }
    },

    "methods": [
        {
            "url": "/listen",
            "category": "listen",
            "description": "Makes the client listen to a new service.",
            "returns": "service",
            "method": "POST",
            "variables": {
                "uuid": {
                    "type": "uuid",
                    "description": "Client UUID",
                    "required": true
                },
                "service": {
                    "type": "service",
                    "description": "The service the client wants to listen to.",
                    "required": true
                }
            }
        },
        {
            "url": "/listen",
            "category": "listen",
            "description": "Lists the services the client is listening to.",
            "returns": "listen[]",
            "method": "GET",
            "variables": {
                "uuid": {
                    "type": "uuid",
                    "description": "Client UUID",
                    "required": true
                }
            }
        },
        {
            "url": "/listen",
            "category": "listen",
            "description": "Makes the client stop listening to a service.",
            "method": "DELETE",
            "variables": {
                "uuid": {
                    "type": "uuid",
                    "description": "Client UUID",
                    "required": true
                },
                "service": {
                    "type": "service",
                    "description": "The service the client wants to stop listening to.",
                    "required": true
                }
            }
        },
        {
            "url": "/message",
            "category": "message",
            "description": "Send a message to all clients listening to the specified service.",
            "method": "POST",
            "variables": {
                "secret": {
                    "type": "secret",
                    "description": "The service the message has to be sent to.",
                    "required": true
                },
                "title": {
                    "description": "The optional title of the message.",
                    "type": "string",
                    "required": false
                },
                "message": {
                    "description": "The content of the message.",
                    "type": "string",
                    "required": true
                },
                "link": {
                    "description": "An optional url that can be sent with the message that allows a client application to redirect a user to that url if needed.",
                    "type": "url",
                    "required": false
                },
                "level": {
                    "description": "This variable is used to indicate the importance of a notification: 1 very low, 2 low, 3 normal, 4 high, 5 very high.",
                    "type": "int",
                    "default": 3,
                    "required": false
                }
            }
        },
        {
            "url": "/message",
            "category": "message",
            "description": "Receive a list of unread messages.",
            "method": "GET",
            "returns": "message[]",
            "variables": {
                "uuid": {
                    "type": "uuid",
                    "description": "Client UUID",
                    "required": true
                }
            }
        },
        {
            "url": "/service",
            "category": "service",
            "description": "Creates a new service. Note: returned service object contains private key.",
            "method": "POST",
            "returns": "service",
            "variables": {
                "name": {
                    "type": "string",
                    "description": "The service name",
                    "required": true
                },
                "icon": {
                    "type": "url",
                    "description": "An optional icon url for the service.",
                    "required": false
                }
            }
        },
        {
            "url": "/service",
            "category": "service",
            "description": "Obtains service info. Note: Either the public or private key is required.",
            "method": "GET",
            "returns": "service",
            "variables": {
                "service": {
                    "type": "service",
                    "description": "The service the client wants to obtain info from.",
                    "required": false
                },
                "secret": {
                    "type": "secret",
                    "description": "The service the client wants to obtain info from.",
                    "required": false
                }
            }
        }
    ]
}
